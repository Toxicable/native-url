var e,t=(e=require("querystring"))&&"object"==typeof e&&"default"in e?e.default:e,r=/https?|ftp|gopher|file/;function a(e){"string"==typeof e&&(e=f(e));var a=function(e,t,r){var a=e.auth,o=e.hostname,s=e.protocol||"",c=e.pathname||"",h=e.hash||"",p=e.query||"",n=!1;a=a?encodeURIComponent(a).replace(/%3A/i,":")+"@":"",e.host?n=a+e.host:o&&(n=a+(~o.indexOf(":")?"["+o+"]":o),e.port&&(n+=":"+e.port)),p&&"object"==typeof p&&(p=t.encode(p));var l=e.search||p&&"?"+p||"";return s&&":"!==s.substr(-1)&&(s+=":"),e.slashes||(!s||r.test(s))&&!1!==n?(n="//"+(n||""),c&&"/"!==c[0]&&(c="/"+c)):n||(n=""),h&&"#"!==h[0]&&(h="#"+h),l&&"?"!==l[0]&&(l="?"+l),{protocol:s,host:n,pathname:c=c.replace(/[?#]/g,encodeURIComponent),search:l=l.replace("#","%23"),hash:h}}(e,t,r);return""+a.protocol+a.host+a.pathname+a.search+a.hash}var o="xyz://",s="w.w",c=o+s,h="http://"+s,p=/^https?|ftp|gopher|file/,n=/^(.+?)([#?].*)/,l=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,i=/^([a-z0-9.+-]*:)?\/\/\/*/i,u=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function m(e){try{return decodeURI(e)}catch(t){return e}}function f(e,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var c=(e=m(e.trim())).match(n);e=c?c[1].replace(/\\/g,"/")+c[2]:e.replace(/\\/g,"/"),u.test(e)&&"/"!==e.slice(-1)&&(e+="/");var f=!/(^javascript)/.test(e)&&e.match(l),v=i.test(e),d="";f&&(p.test(f[1])||(d=f[1].toLowerCase(),e=""+f[2]+f[3]),f[2]||(v=!1,p.test(f[1])?(d=f[1],e=""+f[3]):e="//"+f[3]),3!==f[2].length&&1!==f[2].length||(d=f[1],e="/"+f[3]));var g,b=e.match(/(:[0-9]+)/),y="";b&&b[1]&&3===b[1].length&&(e=e.replace(y=b[1],y+"00"));var w={},R="",U="";try{g=new URL(e)}catch(t){R=t,d||o||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(U="/",e=e.substr(1));try{g=new URL(e,h)}catch(e){return w.protocol=d,w.href=d,w}}w.slashes=v&&!U,w.host=g.host.includes(s)?"":g.host,w.hostname=g.hostname.includes(s)?"":g.hostname.replace(/(\[|\])/g,""),w.protocol=R?d||null:g.protocol,w.search=g.search.replace(/\\/g,"%5C"),w.hash=g.hash.replace(/\\/g,"%5C");var j=e.split("#");!w.search&&j[0].includes("?")&&(w.search="?"),w.hash||""!==j[1]||(w.hash="#"),w.query=r?t.decode(g.search.substr(1)):w.search.substr(1),w.pathname=U+m(g.pathname).replace(/"/g,"%22"),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),R&&"/"!==e[0]&&(w.pathname=w.pathname.substr(1)),d&&!p.test(d)&&"/"!==e.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[g.username,g.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=g.port,y&&(w.host=w.host.replace(y+"00",y),w.port=w.port.slice(0,-2)),w.href=U?""+w.pathname+w.search+w.hash:a(w);var x=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach(function(e){x.includes(e)||(w[e]=w[e]||null)}),w}var v=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,d=/https?|ftp|gopher|file/;function g(e,t){var r="string"==typeof e?f(e):e;e="object"==typeof e?a(e):e;var h=f(t),p="";r.protocol&&!r.slashes&&(p=r.protocol,e=e.replace(r.protocol,""),p+="/"===t[0]||"/"===e[0]?"/":""),p&&h.protocol&&(p="",h.slashes||(p=h.protocol,t=t.replace(h.protocol,"")));var n=e.match(v);n&&!h.protocol&&(e=e.substr((p=n[1]+(n[2]||"")).length),/^\/\/[^/]/.test(t)&&(p=p.slice(0,-1)));var l=new URL(e,c+"/"),i=new URL(t,l).toString().replace(o,"").replace(s,"");return d.test(i)||t.includes(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==i.slice(-1)||(i=i.slice(0,-1)),p&&(i=p+("/"===i[0]?i.substr(1):i)),i}exports.parse=f,exports.format=a,exports.resolve=g,exports.resolveObject=function(e,t){return f(g(e,t))};
//# sourceMappingURL=index.js.map
